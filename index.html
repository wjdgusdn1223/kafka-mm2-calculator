<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kafka & MirrorMaker2 ãƒªã‚½ãƒ¼ã‚¹è¨ˆç®—æ©Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active:hover {
            background: #5a6fd8;
        }

        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .tab-content.active {
            display: block;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group small {
            display: block;
            margin-top: 5px;
            color: #666;
            font-size: 0.9rem;
        }

        .calculate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .results {
            margin-top: 30px;
        }

        .result-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .result-section h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .resource-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }

        .resource-table th, .resource-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        .resource-table th {
            background-color: #667eea;
            color: white;
            font-weight: 600;
        }

        .resource-table tr:hover {
            background-color: #f1f3f4;
        }

        .explanation {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            border-left: 4px solid #2196f3;
        }

        .explanation h5 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .explanation ul {
            padding-left: 20px;
        }

        .explanation li {
            margin-bottom: 5px;
        }

        .knowledge-section {
            margin-bottom: 30px;
        }

        .knowledge-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.4rem;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 10px;
        }

        .knowledge-content {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            line-height: 1.7;
        }

        .knowledge-content h4 {
            color: #495057;
            margin: 20px 0 10px 0;
        }

        .knowledge-content ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .knowledge-content li {
            margin-bottom: 8px;
        }

        .formula {
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #ffc107;
            font-family: monospace;
            font-size: 0.95rem;
        }

        .warning {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #dc3545;
        }

        .info {
            background: #d1ecf1;
            color: #0c5460;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #17a2b8;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                border-bottom: 1px solid #dee2e6;
            }
            
            .tab:last-child {
                border-bottom: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Kafka & MirrorMaker2 ãƒªã‚½ãƒ¼ã‚¹è¨ˆç®—æ©Ÿ</h1>
            <p>KRaftãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ - Kubernetesãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆç”¨ã®ãƒªã‚½ãƒ¼ã‚¹ç®—å®šãƒ„ãƒ¼ãƒ«</p>
            <div class="warning" style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin-top: 15px; border-left: 4px solid #dc3545;">
                <strong>âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …</strong><br>
                æœ¬ãƒ„ãƒ¼ãƒ«ã®è¨ˆç®—çµæœã¯å‚è€ƒå€¤ã§ã‚ã‚Šã€æ­£ç¢ºãªæœ€çµ‚å›ç­”ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Kafka ã¨ MirrorMaker2 å°å…¥æ™‚ã®ãƒªã‚½ãƒ¼ã‚¹é‡ã‚’æ¦‚ç®—ã™ã‚‹ãŸã‚ã®ç›®å®‰ã¨ã—ã¦ã”åˆ©ç”¨ãã ã•ã„ã€‚å®Ÿéš›ã®ç’°å¢ƒã§ã¯å¿…ãšè² è·ãƒ†ã‚¹ãƒˆã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹èª¿æ•´ãŒå¿…è¦ã§ã™ã€‚
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="openTab(event, 'calculator')">ãƒªã‚½ãƒ¼ã‚¹è¨ˆç®—</button>
            <button class="tab" onclick="openTab(event, 'knowledge')">ãƒ™ãƒ¼ã‚¹çŸ¥è­˜</button>
        </div>

        <div id="calculator" class="tab-content active">
            <form id="calculatorForm">
                <div class="form-section">
                    <h3>åŸºæœ¬ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</h3>
                    
                    <div class="form-group">
                        <label for="messagesPerSecond">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†é‡ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/ç§’ï¼‰</label>
                        <input type="number" id="messagesPerSecond" name="messagesPerSecond" value="10000" min="1" required>
                        <small>ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«æµå…¥ã™ã‚‹å¹³å‡ã¾ãŸã¯ãƒ”ãƒ¼ã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ã€‚MirrorMaker2ã«ã‚ˆã‚‹è¤‡è£½ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã¯ç„¡è¦–ã—ã¦å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆè‡ªå‹•ã§è¨ˆç®—ã«å«ã¾ã‚Œã¾ã™ï¼‰ã€‚</small>
                    </div>

                    <div class="form-group">
                        <label for="avgMessageSize">å¹³å‡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚ºï¼ˆKBï¼‰</label>
                        <input type="number" id="avgMessageSize" name="avgMessageSize" value="1" min="0.1" step="0.1" required>
                        <small>å„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¹³å‡ã‚µã‚¤ã‚ºã€‚å‡¦ç†é‡ã¨æ›ã‘åˆã‚ã›ã¦ç§’é–“ãƒ‡ãƒ¼ã‚¿é‡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚</small>
                    </div>

                    <div class="form-group">
                        <label for="totalPartitions">ç·ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°</label>
                        <input type="number" id="totalPartitions" name="totalPartitions" value="1000" min="1" required>
                        <small>ã™ã¹ã¦ã®ãƒˆãƒ”ãƒƒã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°ã®åˆè¨ˆã€‚åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®å ´åˆã¯è¤‡è£½ãƒˆãƒ”ãƒƒã‚¯ãŒè¿½åŠ ã•ã‚Œã‚‹ãŸã‚ã€å®Ÿéš›ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°ã¯2å€ã¨ã—ã¦è¨ˆç®—ã•ã‚Œã¾ã™ã€‚MirrorMaker2ã«ã‚ˆã‚‹è¤‡è£½ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¯ç„¡è¦–ã—ã¦å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</small>
                    </div>

                    <div class="form-group">
                        <label for="retentionDays">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿ç®¡æœŸé–“ï¼ˆæ—¥ï¼‰</label>
                        <input type="number" id="retentionDays" name="retentionDays" value="7" min="1" required>
                        <small>ãƒ‡ãƒ¼ã‚¿ãŒã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«ä¿å­˜ã•ã‚Œã‚‹æœŸé–“ã€‚ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡è¨ˆç®—ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚</small>
                    </div>

                    <div class="form-group">
                        <label for="replicationFactor">ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼</label>
                        <input type="number" id="replicationFactor" name="replicationFactor" value="3" min="1" max="7" required>
                        <small>å„ãƒˆãƒ”ãƒƒã‚¯ã®è¤‡è£½æœ¬æ•°ã€‚é€šå¸¸ã¯3ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</small>
                    </div>

                    <div class="form-group">
                        <label for="consumerGroups">ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—æ•°</label>
                        <input type="number" id="consumerGroups" name="consumerGroups" value="2" min="1" required>
                        <small>åŒæ™‚ã«åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’è³¼èª­ã™ã‚‹ç‹¬ç«‹ã—ãŸã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã®æ•°ã€‚MirrorMaker2ã‚‚1ã¤ã®ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã—ã¦è¨ˆç®—ã•ã‚Œã¾ã™ã€‚</small>
                    </div>
                </div>

                <div class="form-section">
                    <h3>MirrorMaker2è¨­å®š</h3>
                    
                    <div class="form-group">
                        <label for="mirroringType">ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã‚¿ã‚¤ãƒ—</label>
                        <select id="mirroringType" name="mirroringType" required>
                            <option value="bidirectional">åŒæ–¹å‘ (Blue â‡„ Green)</option>
                            <option value="unidirectional">å˜æ–¹å‘ (Blue â†’ Green)</option>
                        </select>
                        <small>å˜æ–¹å‘åŒæœŸã‚’å®Ÿæ–½ã—ã¦ã„ã‚‹å ´åˆã¯å˜æ–¹å‘ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</small>
                    </div>

                    <div class="form-group">
                        <label for="compressionEnabled">åœ§ç¸®ä½¿ç”¨</label>
                        <select id="compressionEnabled" name="compressionEnabled" required>
                            <option value="false">ãªã—</option>
                            <option value="true">ã‚ã‚Šï¼ˆCPUä½¿ç”¨é‡å¢—åŠ ï¼‰</option>
                        </select>
                        <small>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸åœ§ç¸®ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€CPUä½¿ç”¨é‡ãŒå¢—åŠ ã—ã¾ã™ã€‚</small>
                    </div>

                    <div class="form-group">
                        <label for="tlsEnabled">TLSæš—å·åŒ–ä½¿ç”¨</label>
                        <select id="tlsEnabled" name="tlsEnabled" required>
                            <option value="false">ãªã—</option>
                            <option value="true">ã‚ã‚Šï¼ˆCPUä½¿ç”¨é‡å¢—åŠ ï¼‰</option>
                        </select>
                        <small>TLSæš—å·åŒ–ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€CPUä½¿ç”¨é‡ãŒå¢—åŠ ã—ã¾ã™ã€‚</small>
                    </div>
                </div>

                <button type="submit" class="calculate-btn">ãƒªã‚½ãƒ¼ã‚¹ã‚’è¨ˆç®—ã™ã‚‹</button>
            </form>

            <div id="results" class="results" style="display: none;"></div>
        </div>

        <div id="knowledge" class="tab-content">
            <div class="knowledge-section">
                <h3>å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è©³ç´°èª¬æ˜</h3>
                <div class="knowledge-content">
                    <h4>1. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†é‡ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/ç§’ï¼‰</h4>
                    <p>ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«æµå…¥ã™ã‚‹å¹³å‡ã¾ãŸã¯ãƒ”ãƒ¼ã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ã‚’æ„å‘³ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šç§’é–“ãƒã‚¤ãƒˆå‡¦ç†é‡ã‚’è¨ˆç®—ã§ãã¾ã™ï¼ˆä¾‹ï¼šmsgs_per_sec Ã— avg_msg_sizeï¼‰ã€‚</p>
                    <div class="info">
                        <strong>åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®è‡ªå‹•è¨ˆç®—ï¼š</strong><br>
                        MirrorMaker2ã«ã‚ˆã‚‹è¤‡è£½ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã¯ç„¡è¦–ã—ã¦å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®å ´åˆã€å„ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«ã¯å…¥åŠ›ã—ãŸãƒ‡ãƒ¼ã‚¿ã¨MirrorMaker2ã«ã‚ˆã‚‹è¤‡è£½ãƒ‡ãƒ¼ã‚¿ãŒå…±å­˜ã™ã‚‹ãŸã‚ã€å®Ÿéš›ã®å‡¦ç†é‡ã¯å…¥åŠ›å€¤ã®2å€ã¨ã—ã¦è‡ªå‹•è¨ˆç®—ã•ã‚Œã¾ã™ã€‚
                    </div>

                    <h4>2. å¹³å‡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚ºï¼ˆKBï¼‰</h4>
                    <p>å„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å¹³å‡ã‚µã‚¤ã‚ºã§ã™ã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚ºã¨å‡¦ç†é‡ã‚’æ›ã‘ã¦ç§’é–“ãƒ‡ãƒ¼ã‚¿é‡ï¼ˆä¾‹ï¼šMB/sï¼‰ã‚’è¨ˆç®—ã—ã€ãƒ‡ã‚£ã‚¹ã‚¯ãŠã‚ˆã³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å®¹é‡è¨ˆç®—ã«ä½¿ç”¨ã—ã¾ã™ã€‚</p>
                    <div class="formula">
                        ä¾‹ï¼šå¹³å‡1KBãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç§’é–“10,000ä»¶å‡¦ç† = ç´„10MB/sã®ãƒ‡ãƒ¼ã‚¿ç‡
                    </div>

                    <h4>3. ç·ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°</h4>
                    <p>ã™ã¹ã¦ã®ãƒˆãƒ”ãƒƒã‚¯ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°ã®åˆè¨ˆã§ã™ã€‚MirrorMaker2ã«ã‚ˆã‚‹è¤‡è£½ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã¯ç„¡è¦–ã—ã¦å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>
                    <div class="warning">
                        <strong>é‡è¦ï¼š</strong> åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®å ´åˆã€è¤‡è£½ãƒˆãƒ”ãƒƒã‚¯ãŒè¿½åŠ ã•ã‚Œã‚‹ãŸã‚å®Ÿéš›ã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°ã¯2å€ã¨ã—ã¦è‡ªå‹•è¨ˆç®—ã•ã‚Œã¾ã™ã€‚ã“ã®å€¤ã¯ãƒªãƒ¼ãƒ€ãƒ¼+ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼ãƒ¬ãƒ—ãƒªã‚«ã‚’å…¨ã¦å«ã‚“ã ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ç·è¨ˆã¨ã—ã¦è¨ˆç®—ã•ã‚Œã¾ã™ã€‚
                    </div>

                    <h4>4. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿ç®¡æœŸé–“ï¼ˆæ—¥ï¼‰</h4>
                    <p>ãƒ‡ãƒ¼ã‚¿ãŒã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã«ä¿å­˜ã•ã‚Œã‚‹æœŸé–“ã§ã€ä¸ãˆã‚‰ã‚ŒãŸretentionæœŸé–“ä¸­ã«ä¿å­˜ã•ã‚Œã‚‹ç·ãƒ‡ãƒ¼ã‚¿é‡ã‚’è¨ˆç®—ã™ã‚‹ã®ã«å¿…è¦ã§ã™ã€‚</p>
                    <div class="formula">
                        ä¾‹ï¼šæ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿æµå…¥é‡1TBã€ä¿ç®¡æœŸé–“7æ—¥ â†’ æœ€ä½7TBã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å¿…è¦ï¼ˆãƒ¬ãƒ—ãƒªã‚«ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãŠã‚ˆã³ä½™è£•å®¹é‡é™¤ãï¼‰
                    </div>

                    <h4>5. ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼</h4>
                    <p>å„ãƒˆãƒ”ãƒƒã‚¯ã®è¤‡è£½æœ¬æ•°ã§ã™ï¼ˆä¾‹ï¼š3ï¼‰ã€‚ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼ãŒrã®å ´åˆã€1ã¤ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å†…rå€‹ã®ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã«ä¿å­˜ã•ã‚Œã‚‹ãŸã‚ã€ä¿å­˜å®¹é‡ãŠã‚ˆã³å†…éƒ¨è¤‡è£½ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒrå€å¢—åŠ ã—ã¾ã™ã€‚</p>

                    <h4>6. ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—æ•°</h4>
                    <p>åŒæ™‚ã«åŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’è³¼èª­ã™ã‚‹ç‹¬ç«‹ã—ãŸã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã®æ•°ã§ã™ã€‚ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ãŒå¤šã„ã»ã©ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã®ã‚¢ã‚¦ãƒˆãƒã‚¦ãƒ³ãƒ‰ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒå¢—åŠ ã—ã¾ã™ã€‚</p>
                    <div class="info">
                        <strong>MirrorMaker2ã®è€ƒæ…®ï¼š</strong><br>
                        MirrorMaker2ã‚‚ã‚½ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å´ã§ã¯1ã¤ã®ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã—ã¦å‹•ä½œã™ã‚‹ãŸã‚ã€MM2ã«ã‚ˆã‚‹è² è·ã‚’è¨ˆç®—ã«å«ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
                    </div>
                </div>
            </div>

            <div class="knowledge-section">
                <h3>ãƒªã‚½ãƒ¼ã‚¹è¨ˆç®—ã®æ ¹æ‹ </h3>
                <div class="knowledge-content">
                    <h4>Kafka ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ï¼ˆKRaftãƒ¢ãƒ¼ãƒ‰ï¼‰</h4>
                    <ul>
                        <li><strong>Podæ•°ï¼š</strong> KRaftã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¯2n+1ã®å¥‡æ•°å€‹ã§æ§‹æˆã—ã€éåŠæ•°æŠ•ç¥¨ã«ã‚ˆã‚‹å¯ç”¨æ€§ã‚’ç¢ºä¿ã—ã¾ã™ã€‚ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ã¯æœ€ä½3å°ï¼ˆå…¸å‹çš„ã«ã¯3å°ã€å¿…è¦ã«å¿œã˜ã¦5å°ï¼‰ã‚’æ¨å¥¨</li>
                        <li><strong>CPUï¼š</strong> ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼1å°å½“ãŸã‚Šç´„4 vCPUã‚’å‰²ã‚Šå½“ã¦ã€‚ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãŒä¸»ãªå½¹å‰²ã§ã™ãŒã€å®‰å®šå‹•ä½œã®ãŸã‚ååˆ†ãªCPUãƒªã‚½ãƒ¼ã‚¹ã‚’ç¢ºä¿</li>
                        <li><strong>ãƒ¡ãƒ¢ãƒªï¼š</strong> ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚°ä¿æŒã®ãŸã‚ç´„4GBã€‚JVMãƒ’ãƒ¼ãƒ—ã¯1GBç¨‹åº¦ã§ååˆ†ï¼ˆKafkaã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã«å¤§å®¹é‡ãƒ’ãƒ¼ãƒ—ã‚’è¦æ±‚ã—ã¾ã›ã‚“ï¼‰</li>
                        <li><strong>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼š</strong> é«˜é€ŸSSDãŒå¿…é ˆã€‚Confluentæ¨å¥¨ã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼1å°å½“ãŸã‚Šç´„64GB SSDã€‚ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å°‚ç”¨ã¨ã—ã¦ä¿¡é ¼æ€§ã¨é€Ÿåº¦ã®é«˜ã„ãƒ‡ã‚£ã‚¹ã‚¯ãŒå¿…è¦</li>
                    </ul>

                    <h4>Kafka ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼</h4>
                    <ul>
                        <li><strong>Podæ•°ï¼š</strong> 
                            <ul>
                                <li>ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ¶ç´„ï¼š1ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼å½“ãŸã‚Šæœ€å¤§ç´„4,000å€‹ã¾ã§æ¨å¥¨</li>
                                <li>ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆåˆ¶ç´„ï¼šãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼å½“ãŸã‚Šã®æœ€å¤§å‡¦ç†èƒ½åŠ›ã‚’è€ƒæ…®</li>
                                <li>ä¾‹ï¼š3ãƒãƒ¼ãƒ‰ãƒ»RF=3ãƒ»2æ¶ˆè²»ã‚°ãƒ«ãƒ¼ãƒ—ã®ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã§ã¯ç†è«–ä¸Š800MB/sç¨‹åº¦ãŒä¸Šé™ã€æœ¬ç•ªã§ã¯80%ç¨‹åº¦ï¼ˆ640MB/sï¼‰ã«æŠ‘åˆ¶æ¨å¥¨</li>
                            </ul>
                        </li>
                        <li><strong>CPUï¼š</strong> 
                            <ul>
                                <li>ä¸€èˆ¬çš„ã«ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼å½“ãŸã‚Š4ã€œ8 vCPUï¼ˆrequestï¼‰ã€æœ€å¤§24 vCPUã¾ã§ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒƒãƒ—</li>
                                <li>å¤šãã®Kafkaæœ¬ç•ªã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã§ã¯1å°å½“ãŸã‚Š24ã‚³ã‚¢ç¨‹åº¦ã‚’ä½¿ç”¨</li>
                                <li>CPUã‚¯ãƒ­ãƒƒã‚¯ã‚ˆã‚Šã‚‚ã‚³ã‚¢æ•°ã‚’é‡è¦–ã—ã€ä¸¦è¡Œå‡¦ç†èƒ½åŠ›ã§é«˜ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’å®Ÿç¾</li>
                            </ul>
                        </li>
                        <li><strong>ãƒ¡ãƒ¢ãƒªï¼š</strong> 
                            <ul>
                                <li>JVMãƒ’ãƒ¼ãƒ—ã¯6GBä»¥ä¸‹ã«æŠ‘åˆ¶ï¼ˆKafkaã¯ãƒ’ãƒ¼ãƒ—ã‚’æ…é‡ã«ä½¿ç”¨ï¼‰</li>
                                <li>æ®‹ã‚Šãƒ¡ãƒ¢ãƒªã¯å…¨ã¦OSãƒšãƒ¼ã‚¸ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ã—ã¦æ´»ç”¨</li>
                                <li>æ¨å¥¨ï¼šãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼1å°å½“ãŸã‚Š32ã€œ64GBï¼ˆ64GB RAMã‚µãƒ¼ãƒãƒ¼ãŒç†æƒ³çš„ï¼‰</li>
                                <li>ä¾‹ï¼šç·ãƒ¡ãƒ¢ãƒª32GBã§ãƒ’ãƒ¼ãƒ—6GBã®å ´åˆã€ç´„26GBã‚’ãƒ‡ã‚£ã‚¹ã‚¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«å……å½“</li>
                            </ul>
                        </li>
                        <li><strong>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼š</strong> 
                            <ul>
                                <li>è¨ˆç®—å¼ï¼šæ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿æµå…¥é‡ Ã— ä¿ç®¡æ—¥æ•° Ã— ãƒ¬ãƒ—ãƒªã‚«ä¿‚æ•° Ã· ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼æ•°</li>
                                <li>é‡è¦ï¼šãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨ç‡85%ä»¥ä¸‹ã‚’ç¶­æŒï¼ˆä½™è£•ç‡15%ç¢ºä¿ï¼‰</li>
                                <li>ä¾‹ï¼šæ—¥æ¬¡1TB Ã— 7æ—¥ Ã— RF3 = 21TB â†’ 85%ãƒ«ãƒ¼ãƒ«é©ç”¨ã§ç´„24.7TBå¿…è¦</li>
                            </ul>
                        </li>
                    </ul>

                    <h4>MirrorMaker2ï¼ˆã‚¯ãƒ­ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒ³ã‚¿ãƒ¼è¤‡è£½ï¼‰</h4>
                    <ul>
                        <li><strong>Podæ•°ï¼š</strong> 
                            <ul>
                                <li>Kafka Connectãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä¸Šã§å‹•ä½œã€é«˜å¯ç”¨æ€§ã®ãŸã‚æœ€ä½2ã¤ä»¥ä¸Šã®ãƒ¯ãƒ¼ã‚«ãƒ¼ãƒãƒ¼ãƒ‰</li>
                                <li>åŒæ–¹å‘åŒæœŸï¼ˆActive-Activeï¼‰ã§ã¯å„æ–¹å‘ã«åˆ¥å€‹ã®ã‚³ãƒã‚¯ã‚¿ãƒ¼ãŒå¿…è¦</li>
                            </ul>
                        </li>
                        <li><strong>tasks.maxï¼š</strong> 
                            <ul>
                                <li>ç†æƒ³è¨­å®šï¼šmin(è¤‡è£½å…ƒãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ç·æ•°, åˆ©ç”¨å¯èƒ½CPUã‚³ã‚¢æ•°)</li>
                                <li>1ã‚¿ã‚¹ã‚¯ã«ã¤ã1ã‚³ã‚¢ç¨‹åº¦ã‚’å‰²ã‚Šå½“ã¦ã‚‹æƒ³å®šã§è¨ˆç”»</li>
                                <li>ä¾‹ï¼šã‚½ãƒ¼ã‚¹10ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã€8CPUã‚³ã‚¢ã®å ´åˆ â†’ tasks.max = 8</li>
                            </ul>
                        </li>
                        <li><strong>CPUï¼š</strong> 
                            <ul>
                                <li>åŸºæœ¬ï¼šãƒ¯ãƒ¼ã‚«ãƒ¼å½“ãŸã‚Š1ã€œ2 vCPU</li>
                                <li>é«˜è² è·ç’°å¢ƒï¼šå„ãƒ¯ãƒ¼ã‚«ãƒ¼å½“ãŸã‚Š4 vCPUä»¥ä¸Š</li>
                                <li>ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼ãƒ»ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ä¸¡æ–¹ã®å‡¦ç†è² è·ã‚’è€ƒæ…®</li>
                            </ul>
                        </li>
                        <li><strong>ãƒ¡ãƒ¢ãƒªï¼š</strong> JVMãƒ’ãƒ¼ãƒ—1ã€œ4GBç¨‹åº¦ã€ãƒãƒƒãƒ•ã‚¡ãƒªãƒ³ã‚°ã‚’è€ƒæ…®ã—ã¦CPUå½“ãŸã‚Š0.5GBé…åˆ†ãŒç›®å®‰</li>
                    </ul>
                </div>
            </div>

            <div class="knowledge-section">
                <h3>è¨ˆç®—å¼ã®è©³ç´°</h3>
                <div class="knowledge-content">
                    <h4>ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼æ•°ã®è¨ˆç®—</h4>
                    <div class="formula">
                        ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼æ•° = max(
                            ceil((ç·ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•° Ã— ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼) / 4000),
                            ceil(å‡¦ç†é‡è¦ä»¶ã«ã‚ˆã‚‹å¿…è¦æ•°)
                        )
                    </div>

                    <h4>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ã®è¨ˆç®—</h4>
                    <div class="formula">
                        ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼å½“ãŸã‚Šå¿…è¦å®¹é‡ = 
                        (æ—¥åˆ¥å…¥åŠ›ãƒ‡ãƒ¼ã‚¿é‡ Ã— ä¿ç®¡æ—¥æ•° Ã— ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¯ã‚¿ãƒ¼) / ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼æ•° / 0.85
                        
                        â€» 0.85ã¯85%ä½¿ç”¨ç‡åˆ¶é™ã‚’è€ƒæ…®ã—ãŸä½™è£•ç‡
                    </div>

                    <h4>ãƒ¡ãƒ¢ãƒªè¨ˆç®—ï¼ˆãƒšãƒ¼ã‚¸ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰</h4>
                    <div class="formula">
                        æ¨å¥¨ãƒ¡ãƒ¢ãƒª = JVMãƒ’ãƒ¼ãƒ— + (30ç§’åˆ†ã®ãƒ‡ãƒ¼ã‚¿é‡ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ãã‚‹å®¹é‡)
                        
                        30ç§’åˆ†ãƒ‡ãƒ¼ã‚¿é‡ = (ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/ç§’ Ã— å¹³å‡ã‚µã‚¤ã‚º Ã— 30) / ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼æ•°
                    </div>

                    <h4>MM2 tasks.max ã®è¨ˆç®—</h4>
                    <div class="formula">
                        tasks.max = min(è¤‡è£½å¯¾è±¡ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°, åˆ©ç”¨å¯èƒ½ãªç·vCPUæ•°)
                        
                        â€» CPU1ã‚³ã‚¢å½“ãŸã‚Š1ã‚¿ã‚¹ã‚¯ãŒç†æƒ³çš„
                    </div>
                </div>
            </div>

            <div class="knowledge-section">
                <h3>å‚è€ƒæ–‡çŒ®ãƒ»å‡ºå…¸</h3>
                <div class="knowledge-content">
                    <h4>å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</h4>
                    <ul>
                        <li><a href="https://docs.confluent.io/platform/current/kafka-metadata/config-kraft.html" target="_blank">Configure and Monitor KRaft | Confluent Documentation</a></li>
                        <li><a href="https://docs.confluent.io/platform/current/installation/system-requirements.html" target="_blank">Confluent Platform System Requirements | Confluent Documentation</a></li>
                        <li><a href="https://docs.confluent.io/platform/6.1/kafka/deployment.html" target="_blank">Running Kafka in Production | Confluent Documentation</a></li>
                        <li><a href="https://docs.aws.amazon.com/msk/latest/developerguide/bestpractices.html" target="_blank">Best practices for Standard brokers - Amazon Managed Streaming for Apache Kafka</a></li>
                    </ul>

                    <h4>æŠ€è¡“ãƒ–ãƒ­ã‚°ãƒ»ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h4>
                    <ul>
                        <li><a href="https://aws.amazon.com/blogs/big-data/best-practices-for-right-sizing-your-apache-kafka-clusters-to-optimize-performance-and-cost/" target="_blank">Best practices for right-sizing your Apache Kafka clusters to optimize performance and cost | AWS Big Data Blog</a></li>
                        <li><a href="https://www.confluent.io/blog/apache-kafka-supports-200k-partitions-per-cluster/" target="_blank">Apache Kafka Supports 200K Partitions Per Cluster | Confluent</a></li>
                        <li><a href="https://www.instaclustr.com/blog/how-to-size-apache-kafka-clusters-for-tiered-storage-part-3/" target="_blank">How to size Apache KafkaÂ® clusters for Tiered Storage: Part 3 - Instaclustr</a></li>
                    </ul>

                    <h4>MirrorMaker2é–¢é€£</h4>
                    <ul>
                        <li><a href="https://aiven.io/docs/products/kafka/kafka-mirrormaker/concepts/disaster-recovery/active-active-setup" target="_blank">MirrorMaker 2 active-active setup | Aiven docs</a></li>
                        <li><a href="https://www.instaclustr.com/blog/apache-kafka-mirrormaker-2-practice/" target="_blank">Apache Kafka MirrorMaker 2 (MM2) Part 2: Practice</a></li>
                        <li><a href="https://cloud.google.com/managed-service-for-apache-kafka/docs/connect-cluster/create-mirrormaker-connector" target="_blank">Create a MirrorMaker 2.0 connector | Google Cloud Managed Service for Apache Kafka</a></li>
                        <li><a href="https://aiven.io/docs/products/kafka/kafka-mirrormaker/reference/advanced-params" target="_blank">Advanced parameters for Aiven for Apache KafkaÂ® MirrorMaker 2 | Aiven docs</a></li>
                        <li><a href="https://www.redpanda.com/guides/kafka-alternatives-kafka-mirrormaker" target="_blank">Kafka MirrorMakerâ€”Tutorial, best practices and alternatives</a></li>
                    </ul>

                    <div class="info">
                        <strong>æ³¨æ„äº‹é …ï¼š</strong><br>
                        æœ¬è¨ˆç®—ãƒ„ãƒ¼ãƒ«ã¯ä¸Šè¨˜ã®ä¿¡é ¼ã§ãã‚‹ã‚½ãƒ¼ã‚¹ã«åŸºã¥ã„ã¦ä½œæˆã•ã‚Œã¦ã„ã¾ã™ãŒã€å®Ÿéš›ã®ç’°å¢ƒã§ã¯å¿…ãšè² è·ãƒ†ã‚¹ãƒˆã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹èª¿æ•´ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚ãƒªã‚½ãƒ¼ã‚¹è¦ä»¶ã¯å…·ä½“çš„ãªãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã¨ç’°å¢ƒã«å¤§ããä¾å­˜ã—ã¾ã™ã€‚
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openTab(evt, tabName) {
            var i, tabcontent, tabs;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }
            tabs = document.getElementsByClassName("tab");
            for (i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove("active");
            }
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        document.getElementById('calculatorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            calculateResources();
        });

        function calculateResources() {
            // å…¥åŠ›å€¤ã‚’å–å¾—
            const messagesPerSecond = parseInt(document.getElementById('messagesPerSecond').value);
            const avgMessageSize = parseFloat(document.getElementById('avgMessageSize').value);
            const totalPartitions = parseInt(document.getElementById('totalPartitions').value);
            const retentionDays = parseInt(document.getElementById('retentionDays').value);
            const replicationFactor = parseInt(document.getElementById('replicationFactor').value);
            const consumerGroups = parseInt(document.getElementById('consumerGroups').value);
            const mirroringType = document.getElementById('mirroringType').value;
            const compressionEnabled = document.getElementById('compressionEnabled').value === 'true';
            const tlsEnabled = document.getElementById('tlsEnabled').value === 'true';

            // åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®å ´åˆã®èª¿æ•´
            const actualMessagesPerSecond = mirroringType === 'bidirectional' ? messagesPerSecond * 2 : messagesPerSecond;
            const actualTotalPartitions = mirroringType === 'bidirectional' ? totalPartitions * 2 : totalPartitions;
            const actualConsumerGroups = consumerGroups + 1; // MM2ã‚’1ã¤ã®ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã—ã¦è¿½åŠ 

            // åŸºæœ¬è¨ˆç®—
            const bytesPerSecond = actualMessagesPerSecond * avgMessageSize * 1024; // KB to bytes
            const dailyDataGB = (bytesPerSecond * 86400) / (1024 * 1024 * 1024); // GB/day
            const totalStorageGB = dailyDataGB * retentionDays * replicationFactor;

            // ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼è¨ˆç®—
            const controllerPods = 3; // æ¨å¥¨å€¤
            const controllerCPU = 4; // vCPU per pod
            const controllerMemory = 4; // GB per pod
            const controllerStorage = 64; // GB per pod

            // ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼è¨ˆç®—
            const brokersByPartitions = Math.ceil((actualTotalPartitions * replicationFactor) / 4000);
            
            // æ”¹å–„ã•ã‚ŒãŸã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆè¨ˆç®—ï¼š3ãƒãƒ¼ãƒ‰ãƒ»RF=3ãƒ»2æ¶ˆè²»ã‚°ãƒ«ãƒ¼ãƒ—ã§800MB/sç†è«–å€¤ã€80%ã§640MB/så®Ÿç”¨å€¤ã‚’åŸºæº–
            // ã“ã®åŸºæº–ã‹ã‚‰å„ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ã®å®ŸåŠ¹ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’ç´„213MB/s (640/3) ã¨æ¨å®š
            const brokerThroughputMBps = 213; // MB/s per broker (å®Ÿæ¸¬ãƒ™ãƒ¼ã‚¹)
            const safetyFactor = 0.8; // 80%å®‰å…¨ç‡
            const effectiveThroughputPerBroker = brokerThroughputMBps * safetyFactor; // ç´„170MB/s
            
            const brokersByThroughput = Math.ceil((bytesPerSecond / 1024 / 1024) / effectiveThroughputPerBroker);
            const brokerPods = Math.max(3, Math.max(brokersByPartitions, brokersByThroughput)); // æœ€å°3å°

            let brokerCPU = 8; // base vCPU per broker
            if (compressionEnabled) brokerCPU += 4;
            if (tlsEnabled) brokerCPU += 4;

            const cachingMemoryGB = Math.max(2, (bytesPerSecond * 30) / (1024 * 1024 * 1024) / brokerPods); // 30ç§’åˆ†ã‚­ãƒ£ãƒƒã‚·ãƒ¥
            const brokerMemory = Math.max(32, 6 + cachingMemoryGB); // JVMãƒ’ãƒ¼ãƒ—6GB + ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨ãƒ¡ãƒ¢ãƒª
            const brokerStoragePerPod = Math.ceil((totalStorageGB / brokerPods) / 0.85); // 85%åˆ©ç”¨ç‡è€ƒæ…®

            // MM2è¨ˆç®—
            const mm2Instances = mirroringType === 'bidirectional' ? 2 : 1;
            const mm2WorkersPerInstance = 2; // æ¨å¥¨å€¤
            const mm2TotalWorkers = mm2Instances * mm2WorkersPerInstance;
            
            const tasksMax = Math.min(totalPartitions, brokerPods * brokerCPU);
            let mm2CPU = Math.max(2, Math.ceil(tasksMax / mm2WorkersPerInstance));
            if (compressionEnabled) mm2CPU += 1;
            if (tlsEnabled) mm2CPU += 1;
            
            const mm2Memory = Math.max(2, Math.ceil(mm2CPU * 0.5)); // CPUä¾å­˜

            // çµæœè¡¨ç¤º
            displayResults({
                controller: {
                    pods: controllerPods,
                    cpu: controllerCPU,
                    memory: controllerMemory,
                    storage: controllerStorage
                },
                broker: {
                    pods: brokerPods,
                    cpu: brokerCPU,
                    memory: brokerMemory,
                    storage: brokerStoragePerPod,
                    totalStorage: Math.ceil(totalStorageGB / 0.85)
                },
                mm2: {
                    instances: mm2Instances,
                    workersPerInstance: mm2WorkersPerInstance,
                    totalWorkers: mm2TotalWorkers,
                    cpu: mm2CPU,
                    memory: mm2Memory,
                    tasksMax: tasksMax
                },
                calculations: {
                    actualMessagesPerSecond,
                    actualTotalPartitions,
                    actualConsumerGroups,
                    bytesPerSecond,
                    dailyDataGB,
                    totalStorageGB,
                    brokersByPartitions,
                    brokersByThroughput,
                    mirroringType,
                    compressionEnabled,
                    tlsEnabled
                }
            });
        }

        function displayResults(results) {
            const resultsDiv = document.getElementById('results');
            
            resultsDiv.innerHTML = `
                <div class="result-section">
                    <h4>ğŸ›ï¸ Kafka ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼</h4>
                    <table class="resource-table">
                        <tr><th>ãƒªã‚½ãƒ¼ã‚¹</th><th>å€¤</th><th>å˜ä½</th></tr>
                        <tr><td>Podæ•°</td><td>${results.controller.pods}</td><td>å€‹</td></tr>
                        <tr><td>CPU (Request/Limit)</td><td>${results.controller.cpu}</td><td>vCPU/pod</td></tr>
                        <tr><td>ãƒ¡ãƒ¢ãƒª (Request/Limit)</td><td>${results.controller.memory}</td><td>GB/pod</td></tr>
                        <tr><td>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (PVC)</td><td>${results.controller.storage}</td><td>GB/pod</td></tr>
                    </table>
                    <div class="explanation">
                        <h5>ğŸ“‹ è¨ˆç®—æ ¹æ‹ </h5>
                        <ul>
                            <li>KRaftãƒ¢ãƒ¼ãƒ‰ã§ã¯é«˜å¯ç”¨æ€§ã®ãŸã‚ã«å¥‡æ•°å€‹ï¼ˆé€šå¸¸3å€‹ï¼‰ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ãŒå¿…è¦</li>
                            <li>Confluentæ¨å¥¨ä»•æ§˜ï¼šã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼å½“ãŸã‚Š4vCPUã€4GBãƒ¡ãƒ¢ãƒªã€64GB SSD</li>
                            <li>ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ­ã‚°ã®ä¿å­˜ã¨ç®¡ç†ãŒä¸»ãªå½¹å‰²ã®ãŸã‚ã€æ¯”è¼ƒçš„è»½é‡ãªæ§‹æˆ</li>
                        </ul>
                    </div>
                </div>

                <div class="result-section">
                    <h4>ğŸª Kafka ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼</h4>
                    <table class="resource-table">
                        <tr><th>ãƒªã‚½ãƒ¼ã‚¹</th><th>å€¤</th><th>å˜ä½</th></tr>
                        <tr><td>Podæ•°</td><td>${results.broker.pods}</td><td>å€‹</td></tr>
                        <tr><td>CPU (Request)</td><td>${results.broker.cpu}</td><td>vCPU/pod</td></tr>
                        <tr><td>CPU (Limit)</td><td>${Math.ceil(results.broker.cpu * 1.5)}</td><td>vCPU/pod</td></tr>
                        <tr><td>ãƒ¡ãƒ¢ãƒª (Request)</td><td>${results.broker.memory}</td><td>GB/pod</td></tr>
                        <tr><td>ãƒ¡ãƒ¢ãƒª (Limit)</td><td>${Math.ceil(results.broker.memory * 1.2)}</td><td>GB/pod</td></tr>
                        <tr><td>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (PVC)</td><td>${results.broker.storage}</td><td>GB/pod</td></tr>
                        <tr><td>ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç·ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</td><td>${results.broker.totalStorage}</td><td>GB</td></tr>
                    </table>
                    <div class="explanation">
                        <h5>ğŸ“‹ è¨ˆç®—æ ¹æ‹ </h5>
                        <ul>
                            <li><strong>Podæ•°ã®æ±ºå®šï¼š</strong></li>
                            <li>ã€€ğŸ”¸ <strong>åŸºæœ¬ãƒ‡ãƒ¼ã‚¿å‡¦ç†é‡è¨ˆç®—ï¼š</strong></li>
                            <li>ã€€ã€€- å…¥åŠ›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†é‡ï¼š${document.getElementById('messagesPerSecond').value}ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/ç§’</li>
                            <li>ã€€ã€€- å¹³å‡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚ºï¼š${document.getElementById('avgMessageSize').value}KB</li>
                            <li>ã€€ã€€- ${results.calculations.mirroringType === 'bidirectional' ? 'åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°èª¿æ•´ï¼š' + document.getElementById('messagesPerSecond').value + ' Ã— 2 = ' + results.calculations.actualMessagesPerSecond + 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/ç§’' : 'å˜æ–¹å‘ã®ãŸã‚èª¿æ•´ãªã—ï¼š' + results.calculations.actualMessagesPerSecond + 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸/ç§’'}</li>
                            <li>ã€€ã€€- ç§’é–“ãƒ‡ãƒ¼ã‚¿é‡ï¼š${results.calculations.actualMessagesPerSecond} Ã— ${document.getElementById('avgMessageSize').value}KB = ${Math.round(results.calculations.bytesPerSecond / 1024)}KB/s = ${Math.round(results.calculations.bytesPerSecond / 1024 / 1024)}MB/s</li>
                            <li>ã€€ğŸ”¸ <strong>ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°ã«ã‚ˆã‚‹åˆ¶ç´„ï¼š</strong></li>
                            <li>ã€€ã€€- å…¥åŠ›ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°ï¼š${document.getElementById('totalPartitions').value}</li>
                            <li>ã€€ã€€- ${results.calculations.mirroringType === 'bidirectional' ? 'åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°èª¿æ•´ï¼š' + document.getElementById('totalPartitions').value + ' Ã— 2 = ' + results.calculations.actualTotalPartitions : 'å˜æ–¹å‘ã®ãŸã‚èª¿æ•´ãªã—ï¼š' + results.calculations.actualTotalPartitions}</li>
                            <li>ã€€ã€€- ç·ãƒ¬ãƒ—ãƒªã‚«æ•°ï¼š${results.calculations.actualTotalPartitions} Ã— ${document.getElementById('replicationFactor').value} = ${results.calculations.actualTotalPartitions * parseInt(document.getElementById('replicationFactor').value)}</li>
                            <li>ã€€ã€€- å¿…è¦ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼æ•°ï¼šceil(${results.calculations.actualTotalPartitions * parseInt(document.getElementById('replicationFactor').value)} Ã· 4000) = ${results.calculations.brokersByPartitions}å°</li>
                            <li>ã€€ğŸ”¸ <strong>å‡¦ç†é‡ã«ã‚ˆã‚‹åˆ¶ç´„ï¼š</strong></li>
                            <li>ã€€ã€€- ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ç§’é–“å‡¦ç†é‡ï¼š${Math.round(results.calculations.bytesPerSecond / 1024 / 1024)}MB/s</li>
                            <li>ã€€ã€€- ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼å®ŸåŠ¹ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆåŸºæº–ï¼š213MB/sï¼ˆ3ãƒãƒ¼ãƒ‰ãƒ»RF=3ãƒ»2æ¶ˆè²»ã‚°ãƒ«ãƒ¼ãƒ—ã§640MB/så®Ÿç”¨å€¤ã®1/3ï¼‰</li>
                            <li>ã€€ã€€- å®‰å…¨ç‡ï¼ˆ80%ä½¿ç”¨ï¼‰é©ç”¨ï¼š213MB/s Ã— 0.8 = 170MB/s</li>
                            <li>ã€€ã€€- å¿…è¦ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼æ•°ï¼šceil(${Math.round(results.calculations.bytesPerSecond / 1024 / 1024)}MB/s Ã· 170MB/s) = ${results.calculations.brokersByThroughput}å°</li>
                            <li>ã€€ğŸ”¸ <strong>æœ€çµ‚æ±ºå®šï¼š</strong> max(æœ€å°3å°, ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³åˆ¶ç´„${results.calculations.brokersByPartitions}å°, å‡¦ç†é‡åˆ¶ç´„${results.calculations.brokersByThroughput}å°) = ${results.broker.pods}å°</li>
                            <li><strong>CPUè¨­å®šï¼š</strong></li>
                            <li>ã€€- åŸºæœ¬CPUï¼š8vCPU</li>
                            ${results.calculations.compressionEnabled ? '<li>ã€€- åœ§ç¸®å‡¦ç†è¿½åŠ ï¼š+4vCPU</li>' : ''}
                            ${results.calculations.tlsEnabled ? '<li>ã€€- TLSæš—å·åŒ–è¿½åŠ ï¼š+4vCPU</li>' : ''}
                            <li>ã€€- åˆè¨ˆCPUï¼š${results.broker.cpu}vCPU/pod</li>
                            <li><strong>ãƒ¡ãƒ¢ãƒªè¨­å®šï¼š</strong></li>
                            <li>ã€€- JVMãƒ’ãƒ¼ãƒ—ï¼š6GBï¼ˆå›ºå®šï¼‰</li>
                            <li>ã€€- 30ç§’åˆ†ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼š${Math.round(results.calculations.bytesPerSecond / 1024 / 1024 / results.broker.pods * 30)}MB â‰ˆ ${Math.round(results.broker.memory - 6)}GB</li>
                            <li>ã€€- åˆè¨ˆãƒ¡ãƒ¢ãƒªï¼š6GB + ${Math.round(results.broker.memory - 6)}GB = ${results.broker.memory}GB/pod</li>
                            <li><strong>ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨ˆç®—ï¼š</strong></li>
                            <li>ã€€- æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿é‡ï¼š${Math.round(results.calculations.bytesPerSecond / 1024 / 1024)} MB/s Ã— 86400ç§’ Ã· 1024 = ${Math.round(results.calculations.dailyDataGB)}GB/æ—¥</li>
                            <li>ã€€- ä¿ç®¡æœŸé–“è€ƒæ…®ï¼š${Math.round(results.calculations.dailyDataGB)}GB Ã— ${document.getElementById('retentionDays').value}æ—¥ = ${Math.round(results.calculations.dailyDataGB * parseInt(document.getElementById('retentionDays').value))}GB</li>
                            <li>ã€€- ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è€ƒæ…®ï¼š${Math.round(results.calculations.dailyDataGB * parseInt(document.getElementById('retentionDays').value))}GB Ã— ${document.getElementById('replicationFactor').value} = ${Math.round(results.calculations.totalStorageGB)}GB</li>
                            <li>ã€€- ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼åˆ†æ•£ï¼š${Math.round(results.calculations.totalStorageGB)}GB Ã· ${results.broker.pods}å° = ${Math.round(results.calculations.totalStorageGB / results.broker.pods)}GB/pod</li>
                            <li>ã€€- å®‰å…¨ç‡ï¼ˆ85%ä½¿ç”¨ï¼‰é©ç”¨ï¼š${Math.round(results.calculations.totalStorageGB / results.broker.pods)}GB Ã· 0.85 = ${results.broker.storage}GB/pod</li>
                        </ul>
                    </div>
                </div>

                <div class="result-section">
                    <h4>ğŸ”„ MirrorMaker2</h4>
                    <table class="resource-table">
                        <tr><th>ãƒªã‚½ãƒ¼ã‚¹</th><th>å€¤</th><th>å˜ä½</th></tr>
                        <tr><td>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°</td><td>${results.mm2.instances}</td><td>å€‹ (${results.calculations.mirroringType === 'bidirectional' ? 'åŒæ–¹å‘' : 'å˜æ–¹å‘'})</td></tr>
                        <tr><td>ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°/ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</td><td>${results.mm2.workersPerInstance}</td><td>pod/ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</td></tr>
                        <tr><td>ç·Podæ•°</td><td>${results.mm2.totalWorkers}</td><td>å€‹</td></tr>
                        <tr><td>tasks.max</td><td>${results.mm2.tasksMax}</td><td>å€‹/ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</td></tr>
                        <tr><td>CPU (Request)</td><td>${results.mm2.cpu}</td><td>vCPU/pod</td></tr>
                        <tr><td>CPU (Limit)</td><td>${Math.ceil(results.mm2.cpu * 1.5)}</td><td>vCPU/pod</td></tr>
                        <tr><td>ãƒ¡ãƒ¢ãƒª (Request)</td><td>${results.mm2.memory}</td><td>GB/pod</td></tr>
                        <tr><td>ãƒ¡ãƒ¢ãƒª (Limit)</td><td>${Math.ceil(results.mm2.memory * 1.5)}</td><td>GB/pod</td></tr>
                    </table>
                    <div class="explanation">
                        <h5>ğŸ“‹ è¨ˆç®—æ ¹æ‹ </h5>
                        <ul>
                            <li><strong>ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°ï¼š</strong> ${results.calculations.mirroringType === 'bidirectional' ? 'åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®ãŸã‚2ã¤ã®MM2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼ˆBlueâ†’Greenã€Greenâ†’Blueï¼‰' : 'å˜æ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®ãŸã‚1ã¤ã®MM2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹'}</li>
                            <li><strong>ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°ï¼š</strong> é«˜å¯ç”¨æ€§ã®ãŸã‚å„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«2ã¤ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ã‚’é…ç½®</li>
                            <li>ã€€- ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹æ•°ï¼š${results.mm2.instances}</li>
                            <li>ã€€- ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°/ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ï¼š${results.mm2.workersPerInstance}</li>
                            <li>ã€€- ç·ãƒ¯ãƒ¼ã‚«ãƒ¼æ•°ï¼š${results.mm2.instances} Ã— ${results.mm2.workersPerInstance} = ${results.mm2.totalWorkers}</li>
                            <li><strong>tasks.maxè¨ˆç®—ï¼š</strong></li>
                            <li>ã€€- è¤‡è£½å¯¾è±¡ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°ï¼š${document.getElementById('totalPartitions').value}</li>
                            <li>ã€€- åˆ©ç”¨å¯èƒ½ç·CPUæ•°ï¼š${results.broker.pods}ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ Ã— ${results.broker.cpu}vCPU = ${results.broker.pods * results.broker.cpu}vCPU</li>
                            <li>ã€€- tasks.maxï¼šmin(${document.getElementById('totalPartitions').value}, ${results.broker.pods * results.broker.cpu}) = ${results.mm2.tasksMax}</li>
                            <li><strong>CPUè¨­å®šï¼š</strong></li>
                            <li>ã€€- ã‚¿ã‚¹ã‚¯æ•°ã«åŸºã¥ãåŸºæœ¬CPUï¼šmax(2, ceil(${results.mm2.tasksMax} Ã· ${results.mm2.workersPerInstance})) = ${Math.max(2, Math.ceil(results.mm2.tasksMax / results.mm2.workersPerInstance))}vCPU</li>
                            ${results.calculations.compressionEnabled ? '<li>ã€€- åœ§ç¸®å‡¦ç†è¿½åŠ ï¼š+1vCPU</li>' : ''}
                            ${results.calculations.tlsEnabled ? '<li>ã€€- TLSæš—å·åŒ–è¿½åŠ ï¼š+1vCPU</li>' : ''}
                            <li>ã€€- åˆè¨ˆCPUï¼š${results.mm2.cpu}vCPU/pod</li>
                            <li><strong>ãƒ¡ãƒ¢ãƒªè¨­å®šï¼š</strong></li>
                            <li>ã€€- CPUå½“ãŸã‚Šé…åˆ†ï¼š${results.mm2.cpu}vCPU Ã— 0.5GB = ${Math.round(results.mm2.cpu * 0.5 * 10) / 10}GB</li>
                            <li>ã€€- æœ€å°ä¿è¨¼ï¼šmax(2GB, ${Math.round(results.mm2.cpu * 0.5 * 10) / 10}GB) = ${results.mm2.memory}GB/pod</li>
                        </ul>
                    </div>
                </div>

                <div class="result-section">
                    <h4>ğŸ“Š è¨ˆç®—ã‚µãƒãƒªãƒ¼</h4>
                    <table class="resource-table">
                        <tr><th>é …ç›®</th><th>å…¥åŠ›å€¤</th><th>èª¿æ•´å¾Œã®å€¤</th><th>èª¬æ˜</th></tr>
                        <tr><td>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†é‡</td><td>${document.getElementById('messagesPerSecond').value}/ç§’</td><td>${results.calculations.actualMessagesPerSecond}/ç§’</td><td>${results.calculations.mirroringType === 'bidirectional' ? 'åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®ãŸã‚2å€' : 'å˜æ–¹å‘ã®ãŸã‚å¤‰æ›´ãªã—'}</td></tr>
                        <tr><td>ç·ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ•°</td><td>${document.getElementById('totalPartitions').value}</td><td>${results.calculations.actualTotalPartitions}</td><td>${results.calculations.mirroringType === 'bidirectional' ? 'åŒæ–¹å‘ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ã®ãŸã‚2å€' : 'å˜æ–¹å‘ã®ãŸã‚å¤‰æ›´ãªã—'}</td></tr>
                        <tr><td>ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—æ•°</td><td>${document.getElementById('consumerGroups').value}</td><td>${results.calculations.actualConsumerGroups}</td><td>MM2ã‚’1ã¤ã®ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã—ã¦è¿½åŠ </td></tr>
                        <tr><td>æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿é‡</td><td>-</td><td>${Math.round(results.calculations.dailyDataGB)}GB</td><td>${Math.round(results.calculations.bytesPerSecond / 1024 / 1024)}MB/s Ã— 86400ç§’ Ã· 1024 = ${Math.round(results.calculations.dailyDataGB)}GB</td></tr>
                        <tr><td>å¿…è¦ç·ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</td><td>-</td><td>${Math.round(results.calculations.totalStorageGB)}GB</td><td>${Math.round(results.calculations.dailyDataGB)}GB Ã— ${document.getElementById('retentionDays').value}æ—¥ Ã— RF${document.getElementById('replicationFactor').value} = ${Math.round(results.calculations.totalStorageGB)}GB</td></tr>
                    </table>
                </div>

                <div class="result-section">
                    <h4>âš ï¸ é‡è¦ãªå…è²¬äº‹é …ã¨é‹ç”¨ä¸Šã®æ³¨æ„äº‹é …</h4>
                    <div class="warning" style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin-bottom: 15px; border-left: 4px solid #dc3545;">
                        <strong>ğŸ“¢ ã“ã®è¨ˆç®—çµæœã«ã¤ã„ã¦</strong><br>
                        ä¸Šè¨˜ã®è¨ˆç®—çµæœã¯<strong>å‚è€ƒå€¤ãƒ»æ¦‚ç®—å€¤</strong>ã§ã‚ã‚Šã€æ­£ç¢ºãªæœ€çµ‚å›ç­”ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Kafka ã¨ MirrorMaker2 å°å…¥æ™‚ã«<strong>ã€Œã©ã®ç¨‹åº¦ã®ãƒªã‚½ãƒ¼ã‚¹ãŒå¿…è¦ã‹ã€ã‚’æŠŠæ¡ã™ã‚‹ãŸã‚ã®ç›®å®‰</strong>ã¨ã—ã¦ã”æ´»ç”¨ãã ã•ã„ã€‚å®Ÿéš›ã®ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ã¯ã€ã“ã‚Œã‚‰ã®å€¤ã‚’å‡ºç™ºç‚¹ã¨ã—ã¦å¿…ãšè² è·ãƒ†ã‚¹ãƒˆã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹èª¿æ•´ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚
                    </div>
                    <div class="explanation">
                        <ul>
                            <li><strong>ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨ç‡ï¼š</strong> 85%ã‚’è¶…ãˆãªã„ã‚ˆã†ç›£è¦–ã—ã€å¿…è¦ã«å¿œã˜ã¦ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å¢—è¨­ã—ã¦ãã ã•ã„</li>
                            <li><strong>CPUä½¿ç”¨ç‡ï¼š</strong> å¹³å¸¸æ™‚60%ä»¥ä¸‹ã‚’ç¶­æŒã—ã€ãƒ”ãƒ¼ã‚¯æ™‚ã®è² è·ã«å‚™ãˆã¦ãã ã•ã„</li>
                            <li><strong>ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ï¼š</strong> JVMãƒ’ãƒ¼ãƒ—ã¯ç·ãƒ¡ãƒ¢ãƒªã®25%ä»¥ä¸‹ã«æŠ‘ãˆã€æ®‹ã‚Šã‚’ãƒšãƒ¼ã‚¸ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ã—ã¦æ´»ç”¨ã—ã¦ãã ã•ã„</li>
                            <li><strong>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼š</strong> å„ãƒ–ãƒ­ãƒ¼ã‚«ãƒ¼ãŒ${Math.round(results.calculations.bytesPerSecond / results.broker.pods / 1024 / 1024)}MB/sç¨‹åº¦ã®å‡¦ç†ã‚’è¡Œã†ãŸã‚ã€ååˆ†ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¸¯åŸŸã‚’ç¢ºä¿ã—ã¦ãã ã•ã„</li>
                            <li><strong>è² è·ãƒ†ã‚¹ãƒˆï¼š</strong> æœ¬è¨ˆç®—çµæœã‚’å‡ºç™ºç‚¹ã¨ã—ã¦å®Ÿéš›ã®è² è·ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ã€ç’°å¢ƒã«å¿œã˜ã¦å¿…ãšèª¿æ•´ã—ã¦ãã ã•ã„</li>
                            <li><strong>ç¶™ç¶šçš„ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ï¼š</strong> å®Ÿéš›ã®ä½¿ç”¨é‡ã‚’ç¶™ç¶šçš„ã«ç›£è¦–ã—ã€å¿…è¦ã«å¿œã˜ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’èª¿æ•´ã—ã¦ãã ã•ã„</li>
                        </ul>
                    </div>
                </div>
            `;
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>