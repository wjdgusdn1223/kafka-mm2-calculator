# Kafka & MM2 リソース計算機

Apache Kafka (KRaft モード) と MirrorMaker2 を Kubernetes 環境にデプロイする際に必要なリソース（CPU、メモリ、ストレージ）を算定するウェブツールです。

## 🚀 特徴

- **日本語対応**: 全ての UI とドキュメントが日本語
- **実践的な計算**: Confluent、AWS などの実運用事例に基づいた計算ロジック
- **詳細な根拠表示**: 各リソース算定の具体的な計算過程と理論的背景を表示
- **双方向ミラーリング対応**: Active-Active 構成での処理量とパーティション数の増加を考慮
- **ベースナレッジ**: 計算根拠となる理論と公式文書の参照情報を別タブで提供

## 🏗️ プロジェクト構造

```
kafka-mm2-calculator/
├── README.md          # このファイル
├── requirements.md    # 要件定義書とベース知識
├── index.html         # メインの計算機ウェブページ
└── CLAUDE.md         # 開発設定
```

## 💻 使用方法

1. `index.html` をウェブブラウザで開く
2. **リソース計算** タブで以下のパラメータを入力:
   - メッセージ処理量（メッセージ/秒）
   - 平均メッセージサイズ（KB）
   - 総パーティション数
   - メッセージ保管期間（日）
   - レプリケーションファクター
   - コンシューマーグループ数
   - ミラーリングタイプ（単方向/双方向）
   - 圧縮・TLS設定
3. 「リソースを計算する」ボタンをクリック
4. 結果として以下が表示されます:
   - Kafka コントローラーのリソース要件
   - Kafka ブローカーのリソース要件  
   - MirrorMaker2 のリソース要件
   - 計算根拠の詳細説明

## 📊 計算対象リソース

### Kafka コントローラー
- Pod 数（推奨: 3台）
- CPU（vCPU/pod）
- メモリ（GB/pod）
- ストレージ（GB/pod）

### Kafka ブローカー
- Pod 数（パーティション制約と処理量制約から算出）
- CPU（Request/Limit）
- メモリ（Request/Limit、JVMヒープ + ページキャッシュ）
- ストレージ（PVC容量、85%使用率制限考慮）

### MirrorMaker2
- インスタンス数（単方向: 1、双方向: 2）
- ワーカー数/インスタンス（推奨: 2）
- tasks.max（並列タスク数）
- CPU・メモリ要件

## 📚 ベース知識

**ベース知識** タブでは以下の情報を参照できます:
- 入力パラメータの詳細説明
- リソース計算の根拠
- 計算式の詳細
- 運用上の注意事項

計算ロジックは以下の信頼できるソースに基づいています:
- Apache Kafka 公式ドキュメント
- Confluent 運用ガイド
- AWS Kafka 運用ベストプラクティス
- Aiven、IBM などの技術ブログ

## 🔧 技術仕様

- **フロントエンド**: HTML5 + CSS3 + Vanilla JavaScript
- **依存関係**: なし（単一 HTML ファイル）
- **ブラウザ要件**: モダンブラウザ（Chrome、Firefox、Safari、Edge）

## ⚠️ 注意事項

- 本ツールの計算結果は **参考値** として使用してください
- 実際の環境では **負荷テストとモニタリング** による調整が必要です
- ディスク使用率は 85% 以下、CPU 使用率は 60% 以下での運用を推奨
- ネットワーク帯域幅の制約も別途考慮してください

## 📝 ライセンス

MIT License

## 🤝 コントリビューション

改善提案やバグ報告は Issue または Pull Request でお願いします。